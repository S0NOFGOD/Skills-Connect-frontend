<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SkillConnect Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat',sans-serif;}
body {
    min-height:100vh;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    position:relative;
}
.container {
    width:95%;
    max-width:600px;
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(20px);
    border-radius:20px;
    padding:30px;
    box-shadow:0 25px 60px rgba(0,0,0,0.4);
    animation: fadeIn 1s ease;
    text-align:center;
}
@keyframes fadeIn{
    from{opacity:0;transform:translateY(20px);}
    to{opacity:1;transform:translateY(0);}
}
h1 {font-weight:700;margin-bottom:15px;}
.profile-image {
    width:120px;
    height:120px;
    border-radius:50%;
    object-fit:cover;
    margin:0 auto 15px auto;
    border:3px solid #00c6ff;
}
.info {
    text-align:left;
    margin:20px 0;
}
.info p {
    margin:10px 0;
    font-size:16px;
}
button {
    padding:12px 25px;
    margin:10px 5px;
    border-radius:12px;
    border:none;
    font-weight:600;
    cursor:pointer;
    transition:0.3s ease;
}
#edit-btn {
    background: linear-gradient(135deg,#00c6ff,#0072ff);
    color:#fff;
}
#edit-btn:hover {transform:scale(1.03);}
#logout-btn {
    background: linear-gradient(135deg,#ff4b5c,#ff1e00);
    color:#fff;
}
#logout-btn:hover {transform:scale(1.03);}
input, select {
    width:100%;
    padding:12px;
    margin-bottom:15px;
    border-radius:12px;
    border:none;
    outline:none;
    font-size:14px;
    background: rgba(255,255,255,0.15);
    color:#fff;
}
select option {color:#000;}
.hidden {display:none;}
</style>
</head>
<body>

<div class="container" id="dashboard-container">
    <h1>Welcome, <span id="user-name">User</span>!</h1>
    <img src="" alt="User Image" class="profile-image" id="user-image">

    <!-- Display Info -->
    <div class="info" id="user-info">
        <p><strong>Email:</strong> <span id="user-email"></span></p>
        <p><strong>Phone:</strong> <span id="user-phone"></span></p>
        <p><strong>Location:</strong> <span id="user-location"></span></p>
        <p><strong>Skill:</strong> <span id="user-skill"></span></p>
    </div>

    <!-- Edit Profile Form -->
    <div class="hidden" id="edit-profile">
        <input type="text" id="edit-name" placeholder="Full Name">
        <input type="email" id="edit-email" placeholder="Email">
        <input type="text" id="edit-phone" placeholder="Phone Number">
        <input type="text" id="edit-location" placeholder="Location">
        <select id="edit-skill">
            <option value="">Select Skill</option>
            <option>Barber</option>
            <option>Phone Repairer</option>
            <option>Electrician</option>
            <option>Plumber</option>
            <option>Web Developer</option>
            <option>Cleaner</option>
        </select>
        <input type="file" id="edit-image" accept="image/*">
        <button id="save-btn">Save Changes</button>
        <button id="cancel-btn">Cancel</button>
    </div>

    <!-- Buttons -->
    <div>
        <button id="edit-btn">Edit Profile</button>
        <button id="logout-btn">Logout</button>
    </div>
</div>

<script>
// Get current user from localStorage
let currentUser = JSON.parse(localStorage.getItem('currentUser'));
let users = JSON.parse(localStorage.getItem('users')) || [];

if(!currentUser){
    // No user logged in
    window.location.href = "index.html";
}

// Display user info
function displayUser(){
    document.getElementById('user-name').innerText = currentUser.name;
    document.getElementById('user-email').innerText = currentUser.email;
    document.getElementById('user-phone').innerText = currentUser.phone;
    document.getElementById('user-location').innerText = currentUser.location;
    document.getElementById('user-skill').innerText = currentUser.skill;
    document.getElementById('user-image').src = currentUser.image || 'https://via.placeholder.com/120';
}
displayUser();

// Logout
document.getElementById('logout-btn').addEventListener('click', ()=>{
    localStorage.removeItem('currentUser');
    window.location.href = "index.html";
});

// Edit Profile Toggle
const editBtn = document.getElementById('edit-btn');
const editForm = document.getElementById('edit-profile');
const userInfo = document.getElementById('user-info');
editBtn.addEventListener('click', ()=>{
    editForm.classList.remove('hidden');
    userInfo.classList.add('hidden');
    // Prefill form
    document.getElementById('edit-name').value = currentUser.name;
    document.getElementById('edit-email').value = currentUser.email;
    document.getElementById('edit-phone').value = currentUser.phone;
    document.getElementById('edit-location').value = currentUser.location;
    document.getElementById('edit-skill').value = currentUser.skill;
});

// Cancel Edit
document.getElementById('cancel-btn').addEventListener('click', ()=>{
    editForm.classList.add('hidden');
    userInfo.classList.remove('hidden');
});

// Save Changes
document.getElementById('save-btn').addEventListener('click', ()=>{
    const name = document.getElementById('edit-name').value.trim();
    const email = document.getElementById('edit-email').value.trim();
    const phone = document.getElementById('edit-phone').value.trim();
    const location = document.getElementById('edit-location').value.trim();
    const skill = document.getElementById('edit-skill').value;
    const imageFile = document.getElementById('edit-image').files[0];

    if(!name || !email || !phone || !location || !skill){
        alert("All fields are required!");
        return;
    }

    function updateUser(imageData){
        currentUser.name = name;
        currentUser.email = email;
        currentUser.phone = phone;
        currentUser.location = location;
        currentUser.skill = skill;
        if(imageData) currentUser.image = imageData;

        // Update users array
        const index = users.findIndex(u => u.email === currentUser.email);
        if(index !== -1) users[index] = currentUser;
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        displayUser();
        editForm.classList.add('hidden');
        userInfo.classList.remove('hidden');
        alert("Profile updated successfully!");
    }

    if(imageFile){
        const reader = new FileReader();
        reader.onload = function(){
            updateUser(reader.result);
        }
        reader.readAsDataURL(imageFile);
    } else {
        updateUser(null);
    }
});
</script>

</body>
                             </html>
